<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="static/admin_dashboard.css">
	<link rel="shortcut icon" href="{{ url_for('static', filename='images/logo.svg') }}">

	<title>Admin Dashboard</title>
</head>
<body>	
	<nav style="z-index: 1;" class="navbar navbar-expand-lg fixed-top navbar-scroll">
		<div class="container-fluid">
			<ul class="navbar-nav ml-auto">
				<li class="nav-item d-flex">
					<a class="navbar-brand logo_button" href="https://www.hogeschoolrotterdam.nl/"><img class="logo" src="static/images/logo.svg" name="HomeButton" action="/main"></a>
				</li>
				<li class="nav-item d-flex align-items-center">
					<div>Dashboard</div>
				</li>
			</ul>
				<ul class="navbar-nav mr-auto">
					<li class="nav-item d-flex align-items-center">
						<a href="{{ url_for('admin') }}" class="button" title="Dashboard" href="#">
							<svg style="width: 26px; fill: #001e48;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
								<path d="M10 14.5v8c0 .6-.4 1-1 1H2c-.6 0-1-.4-1-1V10.1c0-.3.1-.6.3-.8l10-8.6c.4-.3.9-.3 1.3 0l10 8.6c.2.2.3.5.3.8v12.4c0 .6-.4 1-1 1h-7c-.6 0-1-.4-1-1v-8H10zm-2 7v-8c0-.6.4-1 1-1h6c.6 0 1 .4 1 1v8h5V10.6l-9-7.7-9 7.7v10.9h5z"></path>
								<path d="M10 14.5v8c0 .6-.4 1-1 1H2c-.6 0-1-.4-1-1V10.1c0-.3.1-.6.3-.8l10-8.6c.4-.3.9-.3 1.3 0l10 8.6c.2.2.3.5.3.8v12.4c0 .6-.4 1-1 1h-7c-.6 0-1-.4-1-1v-8H10zm-2 7v-8c0-.6.4-1 1-1h6c.6 0 1 .4 1 1v8h5V10.6l-9-7.7-9 7.7v10.9h5z" fill-rule="evenodd" clip-rule="evenodd"></path>
							</svg>
						</a>
					</li>
					<li class="nav-item d-flex align-items-center">
						<a href="{{ url_for('admin.admin_students') }}" class="button" title="Studenten" href="#">
							<svg style="width: 26px; fill: #001e48;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
								<path d="M12 13c5.2 0 8.5 3.4 10 9.8.1.6-.3 1.2-1 1.2H3c-.6 0-1.1-.6-1-1.2C3.5 16.4 6.8 13 12 13zm0 2c-3.7 0-6.2 2.1-7.6 6.7l-.1.3h15.4c-1.4-4.7-3.9-7-7.7-7zm0-15c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6 2.7-6 6-6zm0 2C9.8 2 8 3.8 8 6s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4z"></path>
								<path d="M12 13c5.2 0 8.5 3.4 10 9.8.1.6-.3 1.2-1 1.2H3c-.6 0-1.1-.6-1-1.2C3.5 16.4 6.8 13 12 13zm0 2c-3.7 0-6.2 2.1-7.6 6.7l-.1.3h15.4c-1.4-4.7-3.9-7-7.7-7zm0-15c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6 2.7-6 6-6zm0 2C9.8 2 8 3.8 8 6s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4z"></path>
							  </svg>
						</a>
					</li>
					<li class="nav-item d-flex align-items-center">
						<a class="button" title="Cursus" href="#">
							<svg width="28px" height="28px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#001e48">
								<g id="SVGRepo_bgCarrier" stroke-width="0"></g>
								<g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
								<g id="SVGRepo_iconCarrier">
									<path d="M20 12V4C20 2.89543 19.1046 2 18 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V18.5" stroke="#001e48" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
									<path d="M13 2V14L16.8182 11L20 14V5" stroke="#001e48" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
								</g>
							</svg>
						</a>
					</li>
					<li class="nav-item d-flex">  
						<div id="main">
							<span style="font-size:30px;cursor:pointer" onclick="openNav()" title="Menu">&#9776;</span>
					  	</div>
					</li>
				</ul>
			</div>
		</div>
	</nav>
	<div style="z-index: 10;" id="mySidenav" class="sidenav">
		<div style="position: absolute; top: 0px;" class="head_sidenav d-flex justify-content-between align-items-center">
			<a class="logout" href="{{ url_for('logout') }}" title="Uitloggen">Uitloggen</a>
			<div class="CloseButton" onclick="closeNav()" title="Close">&times;</div>
		</div>
		<div class="body_sidenav">
			<a href="{{ url_for('admin') }}">
				<svg style="width: 22px; fill: white;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
					<path d="M10 14.5v8c0 .6-.4 1-1 1H2c-.6 0-1-.4-1-1V10.1c0-.3.1-.6.3-.8l10-8.6c.4-.3.9-.3 1.3 0l10 8.6c.2.2.3.5.3.8v12.4c0 .6-.4 1-1 1h-7c-.6 0-1-.4-1-1v-8H10zm-2 7v-8c0-.6.4-1 1-1h6c.6 0 1 .4 1 1v8h5V10.6l-9-7.7-9 7.7v10.9h5z"></path>
					<path d="M10 14.5v8c0 .6-.4 1-1 1H2c-.6 0-1-.4-1-1V10.1c0-.3.1-.6.3-.8l10-8.6c.4-.3.9-.3 1.3 0l10 8.6c.2.2.3.5.3.8v12.4c0 .6-.4 1-1 1h-7c-.6 0-1-.4-1-1v-8H10zm-2 7v-8c0-.6.4-1 1-1h6c.6 0 1 .4 1 1v8h5V10.6l-9-7.7-9 7.7v10.9h5z" fill-rule="evenodd" clip-rule="evenodd"></path>
				</svg>
			Dashboard
			</a>
			<a href="{{ url_for('admin.admin_students') }}">
				<svg style="width: 22px; fill: white;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
					<path d="M12 13c5.2 0 8.5 3.4 10 9.8.1.6-.3 1.2-1 1.2H3c-.6 0-1.1-.6-1-1.2C3.5 16.4 6.8 13 12 13zm0 2c-3.7 0-6.2 2.1-7.6 6.7l-.1.3h15.4c-1.4-4.7-3.9-7-7.7-7zm0-15c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6 2.7-6 6-6zm0 2C9.8 2 8 3.8 8 6s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4z"></path>
					<path d="M12 13c5.2 0 8.5 3.4 10 9.8.1.6-.3 1.2-1 1.2H3c-.6 0-1.1-.6-1-1.2C3.5 16.4 6.8 13 12 13zm0 2c-3.7 0-6.2 2.1-7.6 6.7l-.1.3h15.4c-1.4-4.7-3.9-7-7.7-7zm0-15c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6 2.7-6 6-6zm0 2C9.8 2 8 3.8 8 6s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4z"></path>
				</svg>
				Studenten
			</a>
			<a href="">
				<svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff">
					<g id="SVGRepo_bgCarrier" stroke-width="0"></g>
					<g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
					<g id="SVGRepo_iconCarrier">
						<path d="M20 12V4C20 2.89543 19.1046 2 18 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V18.5" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
						<path d="M13 2V14L16.8182 11L20 14V5" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
					</g>
				</svg>
				Cursus
			</a>
			<a href="">Aanwezigheid</a>
			<a href="{{ url_for('admin.admin_faculties') }}">Faculteit</a>
			<a href="{{ url_for('admin.admin_meetings') }}">Meetings</a>
			<a href="">Klassen</a>
		</div>
	</div>
	<div style="padding-top: 75px;" class="container">
		<div class="card bg-light mb-3" style="max-width: 18rem;">
			<div class="card-header d-flex justify-content-between align-items-center">
				<div>
					Alle Klassen
				</div>
				<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addClass">
					Toevoegen
				</button>
			</div>
			<div class="card-body">
				<div id="class-list">

				</div>
			</div>
		</div>
	</div>

	<!-- Modal Toevoegen -->
	<div class="modal fade" id="addClass" tabindex="-1" aria-labelledby="classModalLabel" aria-hidden="true">
		<div class="modal-dialog">
		  	<div class="modal-content">
				<div class="modal-header">
			  		<h5 class="modal-title" id="classModalLabel">Klas Toevoegen</h5>
			  		<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<form id="create-class-form">
						<div class="form-group">
						  <label for="classname">Klasnaam:</label>
						  <input type="text" class="form-control" id="classname" name="classname" required>
						</div>
					</form>
				</div>
				<div class="modal-footer">
			  		<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
			  		<button type="submit" class="btn btn-primary">Toevoegen</button>
				</div>
		  	</div>
		</div>
	</div>
	<script src="https://code.jquery.com/jquery-3.6.2.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
	<script>
		function openNav() {
			document.getElementById("mySidenav").style.width = "500px";
			document.getElementById("main").style.marginRight = "350px";
			document.body.style.backgroundColor = "rgba(0, 0, 0, 0.3)";
		}
		
		function closeNav() {
			document.getElementById("mySidenav").style.width = "0";
			document.getElementById("main").style.marginRight = "0";
			document.body.style.backgroundColor = "#fff7ea";
		}
	  $(document).ready(function() {
		// Make a GET request to the API endpoint
		$.ajax({
		  url: '/api/all_classes',
		  type: 'GET',
		  dataType: 'json',
		  success: function(data) {
			var klassen = data.all_classes;
			klassen.forEach(function(klas) {
			  var classId = klas[0];
			  var className = klas[1];
	
			  var cardDiv = $('<div style="height: 50px; vertical-align: middle;" class="d-flex justify-content-between align-items-center">');
			  var cardText = $('<p style="margin-top: 15px;" class="card-text">').text(classId);
			  var cardSubText = $('<p style="margin-top: 15px;" class="card-text">').text(className);
		      var cardViewButton = $('<button type="submit" class="btn btn-danger">Delete</button>')
	
			  cardDiv.append(cardText);
			  cardDiv.append(cardSubText);
			  cardDiv.append(cardViewButton);
	
			  $('#class-list').append(cardDiv);
			});
		  },
		  error: function(error) {
			console.log(error);
		  }
		});
	  });  
	  
	  $(document).ready(function() {
        $('#create-class-form').submit(function(event) {
          event.preventDefault();
          $.ajax({
            url: '/api/add_class',
            type: 'POST',
            data: JSON.stringify({
              'classname': $('#classname').val(),
            }),
            contentType: 'application/json',
            success: function(data) {
                alert('Klas toegevoegd!');
                window.location.href = '/classes/' + data.class_id;
                },
            error: function(jqXHR, textStatus, errorThrown) {
              alert('Fout met toevoegen van klas: ' + textStatus);
            }
          });
        });
      });      
	</script>
</body>
</html>
